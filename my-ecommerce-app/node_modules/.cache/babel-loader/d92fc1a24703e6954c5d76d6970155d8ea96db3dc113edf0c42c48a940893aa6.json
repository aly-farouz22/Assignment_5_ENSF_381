{"ast":null,"code":"var _jsxFileName = \"/Users/AFarouz/Desktop/Assignment_5_ENSF_381/my-ecommerce-app/src/components/Productpage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Header from './Header';\nimport ProductList from './ProductList';\nimport Cart from './Cart';\nimport Footer from './Footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Productpage = () => {\n  _s();\n  const [cartItems, setCartItems] = useState([]);\n  const [products, setProducts] = useState([]);\n  const navigate = useNavigate();\n  const isLoggedIn = localStorage.getItem(\"isLoggedIn\");\n  useEffect(() => {\n    if (!isLoggedIn) {\n      navigate('/login');\n    } else {\n      fetchProducts();\n    }\n    const storedCartItems = localStorage.getItem('cartItems');\n    if (storedCartItems) {\n      setCartItems(JSON.parse(storedCartItems));\n    }\n  }, [isLoggedIn, navigate]);\n  useEffect(() => {\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  }, [cartItems]);\n  const fetchProducts = () => {\n    fetch('http://localhost:3001/products').then(response => response.json()).then(data => setProducts(data)).catch(error => console.error('Error fetching products:', error));\n  };\n  const addToCart = product => {\n    const existingItemIndex = cartItems.findIndex(item => item.id === product.id);\n    if (existingItemIndex !== -1) {\n      const updatedCartItems = cartItems.map((item, index) => {\n        if (index === existingItemIndex) {\n          return {\n            ...item,\n            quantity: item.quantity + 1\n          };\n        }\n        return item;\n      });\n      setCartItems(updatedCartItems);\n    } else {\n      setCartItems([...cartItems, {\n        ...product,\n        quantity: 1\n      }]);\n    }\n  };\n  const removeFromCart = productId => {\n    const updatedCartItems = cartItems.map(item => {\n      if (item.id === productId) {\n        if (item.quantity === 1) {\n          return null;\n        } else {\n          return {\n            ...item,\n            quantity: item.quantity - 1\n          };\n        }\n      }\n      return item;\n    }).filter(item => item !== null); // Filter out null entries to remove removed items from cart\n\n    setCartItems(updatedCartItems);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-around'\n      },\n      children: [/*#__PURE__*/_jsxDEV(ProductList, {\n        products: products,\n        onAddToCart: addToCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Cart, {\n        cartItems: cartItems,\n        onRemove: removeFromCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(Productpage, \"1hc0xZRLGolSULM4Q3HdOdtsj6U=\", false, function () {\n  return [useNavigate];\n});\n_c = Productpage;\nexport default Productpage;\nvar _c;\n$RefreshReg$(_c, \"Productpage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Header","ProductList","Cart","Footer","jsxDEV","_jsxDEV","Productpage","_s","cartItems","setCartItems","products","setProducts","navigate","isLoggedIn","localStorage","getItem","fetchProducts","storedCartItems","JSON","parse","setItem","stringify","fetch","then","response","json","data","catch","error","console","addToCart","product","existingItemIndex","findIndex","item","id","updatedCartItems","map","index","quantity","removeFromCart","productId","filter","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","justifyContent","onAddToCart","onRemove","_c","$RefreshReg$"],"sources":["/Users/AFarouz/Desktop/Assignment_5_ENSF_381/my-ecommerce-app/src/components/Productpage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Header from './Header';\nimport ProductList from './ProductList';\nimport Cart from './Cart';\nimport Footer from './Footer';\n\nconst Productpage = () => {\n  const [cartItems, setCartItems] = useState([]);\n  const [products, setProducts] = useState([]);\n  const navigate = useNavigate();\n\n  const isLoggedIn = localStorage.getItem(\"isLoggedIn\");\n\n  useEffect(() => {\n    if (!isLoggedIn) {\n      navigate('/login');\n    } else {\n      fetchProducts();\n    }\n\n    const storedCartItems = localStorage.getItem('cartItems');\n    if (storedCartItems) {\n      setCartItems(JSON.parse(storedCartItems));\n    }\n  }, [isLoggedIn, navigate]);\n\n  useEffect(() => {\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  const fetchProducts = () => {\n    fetch('http://localhost:3001/products')\n      .then(response => response.json())\n      .then(data => setProducts(data))\n      .catch(error => console.error('Error fetching products:', error));\n  };\n\n  const addToCart = (product) => {\n    const existingItemIndex = cartItems.findIndex(item => item.id === product.id);\n    if (existingItemIndex !== -1) {\n      const updatedCartItems = cartItems.map((item, index) => {\n        if (index === existingItemIndex) {\n          return { ...item, quantity: item.quantity + 1 };\n        }\n        return item;\n      });\n      setCartItems(updatedCartItems);\n    } else {\n      setCartItems([...cartItems, { ...product, quantity: 1 }]);\n    }\n  };\n\n  const removeFromCart = (productId) => {\n    const updatedCartItems = cartItems.map(item => {\n      if (item.id === productId) {\n        if (item.quantity === 1) {\n          return null; \n        } else {\n          return { ...item, quantity: item.quantity - 1 }; \n        }\n      }\n      return item;\n    }).filter(item => item !== null); // Filter out null entries to remove removed items from cart\n\n    setCartItems(updatedCartItems);\n  };\n\n  return (\n    <div>\n      <Header />\n      <div style={{ display: 'flex', justifyContent: 'space-around' }}>\n        <ProductList products={products} onAddToCart={addToCart} />\n        <Cart cartItems={cartItems} onRemove={removeFromCart} />\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Productpage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}